## bash usages

1. create database schema for mysql

python scripts/02_create_retail_db_schema.py

2. load table Product, ProductCategory from .csv files into corresponding tables in mysql

python scripts/01_load_database_table_from_csv.py --csv_table_file_path /home/phinguyen/data_engineering/ETL_Pipeline_with_Spark_01/sample_data/ProductCategory.csv --csv_table_schema_file_path /home/phinguyen/data_engineering/ETL_Pipeline_with_Spark_01/sample_data/ProductCategory.yaml --table_name ProductCategory
python scripts/01_load_database_table_from_csv.py --csv_table_file_path /home/phinguyen/data_engineering/ETL_Pipeline_with_Spark_01/sample_data/Product.csv --csv_table_schema_file_path /home/phinguyen/data_engineering/ETL_Pipeline_with_Spark_01/sample_data/Product.yaml --table_name Product

3. generating new (fake) data
python scripts/03_generate_multiple_date_sales_data_with_load.py \
-n 10000 \
-sdate 2024-02-15 \
-edate 2024-03-15

4. ingest fixed tables (ProductCategory & Product), without partitioning
/opt/spark/bin/spark-submit \
--master yarn \
/app/src/pipelines/ingestion_fixed_table.py \
--table_name ProductCategory

docker exec -it sparkcli /opt/spark/bin/spark-submit \
--master yarn \
/home/phinguyen/data_engineering/ETL_Pipeline_with_Spark_01/src/pipelines/ingestion_fixed_table.py \
--table_name ProductCategory

./spark-submit \
--master yarn \
--jars /home/phinguyen/lib/mysql-connector-j-8.0.33.jar \
/home/phinguyen/data_engineering/ETL_Pipeline_with_Spark_01/src/pipelines/ingestion_fixed_table.py \
--table_name Product

5. ingest Customers, SalesOrderHeader and SalesOrderDetail tables
./spark-submit \
--master yarn \
--jars /home/phinguyen/lib/mysql-connector-j-8.0.33.jar \
/home/phinguyen/data_engineering/ETL_Pipeline_with_Spark_01/src/pipelines/ingestion.py \
--table_name Customer

6. ETL datalake -> Hive

./spark-submit \
--master yarn \
--driver-cores 1 \
--driver-memory 1g \
--executor-cores 2 \
--executor-memory 2g \
/home/phinguyen/data_engineering/ETL_Pipeline_with_Spark_01/src/pipelines/transformation.py
